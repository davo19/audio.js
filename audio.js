var data = {
    title: [
        "Gangster",
        " Voron",
        " konechna",
        "Snova den snova noch",
        " Yunost"
        // " Deep end foushee"
    ],
    song: [
        " music/Xcho - Гангстер (1).mp3",
        "music/Xcho - Вороны.mp3 ",
        " music/echteliebe-jo-konchena.mp3",
        "music/Dinar Rahmatullin - Снова день снова ночь мысли прочь в эту ночь.mp3",
        "music/Dabro - Юность.mp3"
        // "music/Foushee - Deep end foushee.mp3"

    ],
    poster: [
        "https://i.ytimg.com/vi/I6ymtnFus_A/maxresdefault.jpg",
        "https://www.cevirce.com/en/translate/wp-content/uploads/2021/10/xcho-%D0%B2%D0%BE%D1%80%D0%BE%D0%BD%D1%8B-russian-lyrics-english-translations.jpg",
        "https://images.hungama.com/c/1/347/e9b/47517073/47517073_300x300.jpg",
        "data:image/jpeg;base64,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",
        "https://i1.sndcdn.com/artworks-N76Fd6PyG9AURHU1-frkTbg-t500x500.jpg"
        
    ]
}

//console.log(new Audio());
//console.log(window)


var currentSong = 0

var song = new Audio
console.log(song);


window.onload = function () {
    playSong()
}

function playSong() {
    song.src = data.song[currentSong];
    let songTitle = document.getElementById("songTitle");
    songTitle.textContent = data.title[currentSong];
    let img = document.getElementById("row1");
    img.style.backgroundImage = "url(" + data.poster[currentSong] + ")";
    let main = document.getElementById("main")
    main.style.backgroundImage = "url(" + data.poster[currentSong] + ")";
    song.play();
}

function playOrPauseSong() {
    let play = document.getElementById("play")
    console.log(play);

    if (song.paused) {
        song.play();
        play.src = "images/pause.png" //pause
    } else {
        song.pause();
        play.src = "images/play-button-arrowhead.png" //play
    }
}


song.addEventListener("timeupdate", function () {
    // console.log(song.currentTime);
    // console.log(song.duration);
    let fill = document.getElementById("fill")
    // console.log(fill);
    let position = song.currentTime / song.duration;
    fill.style.width = position * 100 + "%"; // fill

    convertTime(song.currentTime) // cur. time

    if (song.ended) {
        next()
    }
})

function convertTime(seconds) {
    let currentTime = document.getElementById("currentTime")


    let min = Math.floor(seconds / 60)
    let sec = Math.floor(seconds % 60)


    min = (min < 10) ? "0" + min : min;
    sec = (sec < 10) ? "0" + sec : sec;



    currentTime.textContent = min + ":" + sec
    totalTime(Math.round(song.duration))
    console.log(seconds);
    console.log(min);
}

function totalTime(seconds) {
    var min = Math.floor(seconds / 60)
    var sec = Math.floor(seconds % 60)


    min = (min < 10) ? "0" + min : min;
    sec = (sec < 10) ? "0" + sec : sec;
 
    if(isNaN(min) ||isNaN(sec)){
        return false
    }else{

        currentTime.textContent += "/" + min + ":" + sec;
    }

}


function next() {
    currentSong++;
    if (currentSong >= data.song.lenght) {
        currentSong = 0
    }
    playSong();
    play.src = "images/pause.png"

}




function pre() {
    currentSong--;
    if (currentSong < 0) {
        currentSong = data.song.lenght - 1;
    }
    playSong();
    play.src = "images/pause.png"


}


function decrease() {
    song.volume -= 0.2
}

function increase() {
    song.volume += 0.2
}

// function muted(){
//     song.volume = 0
// }

const volStatus = document.getElementById("volStatus")
const volStatusImg = document.getElementById('mute')

volStatus.classList.add('soundOn')

soundOn = () => {
    volStatus.classList.add('soundOn')
    volStatusImg.src = "./images/volume-mute.png"
    song.volume = 0
}

soundOff = () => {
    volStatus.classList.remove("soundOn")
    volStatusImg.src = "./images/volume.png"
    song.volume = 1
}

volStatus.addEventListener("click", () => {
    let isMute = volStatus.classList.contains("soundOn")
    isMute ? soundOff() : soundOn()
})





const progress = document.getElementById('fill');
const progressContainer = document.getElementById('handle');


function updateProgress(e) {
    const { duration, currentTime } = e.srcElement;
    const progressPercent = (currentTime / duration) * 100;
    progress.style.width = `${progressPercent}%`;
  }
  
  // Set progress bar
  function setProgress(e) {
    const width = this.clientWidth;
    const clickX = e.offsetX;
    const duration = song.duration;
  
    song.currentTime = (clickX / width) * duration;
  }
  
  // Time/song update
  song.addEventListener('timeupdate', updateProgress);
  
  // Click on progress bar
  progressContainer.addEventListener('click', setProgress);